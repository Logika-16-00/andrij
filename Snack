<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Змійка</title>
<style>
  body {
    margin: 0;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #fff;
    font-family: sans-serif;
  }
  canvas {
    background: #222;
    box-shadow: 0 0 15px #0f0;
  }
</style>
</head>
<body>
  <canvas id="game" width="400" height="400"></canvas>
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const box = 20; // розмір клітинки
    let snake = [{x: 9*box, y: 10*box}]; // початок
    let direction = "RIGHT";

    let food = {
      x: Math.floor(Math.random()*19+1) * box,
      y: Math.floor(Math.random()*19+1) * box
    };

    document.addEventListener("keydown", changeDirection);

    function changeDirection(e){
      if(e.key === "ArrowLeft" && direction!=="RIGHT") direction = "LEFT";
      if(e.key === "ArrowUp" && direction!=="DOWN") direction = "UP";
      if(e.key === "ArrowRight" && direction!=="LEFT") direction = "RIGHT";
      if(e.key === "ArrowDown" && direction!=="UP") direction = "DOWN";
    }

    function draw(){
      ctx.fillStyle = "#222";
      ctx.fillRect(0,0,400,400);

      // малюємо їжу
      ctx.fillStyle = "red";
      ctx.fillRect(food.x, food.y, box, box);

      // малюємо змійку
      for(let i=0; i<snake.length; i++){
        ctx.fillStyle = i===0 ? "lime" : "green";
        ctx.fillRect(snake[i].x, snake[i].y, box, box);
      }

      // позиція голови
      let snakeX = snake[0].x;
      let snakeY = snake[0].y;

      if(direction==="LEFT") snakeX -= box;
      if(direction==="UP") snakeY -= box;
      if(direction==="RIGHT") snakeX += box;
      if(direction==="DOWN") snakeY += box;

      // якщо з'їв їжу
      if(snakeX === food.x && snakeY === food.y){
        food = {
          x: Math.floor(Math.random()*19+1) * box,
          y: Math.floor(Math.random()*19+1) * box
        };
      } else {
        snake.pop(); // видаляємо хвіст
      }

      // нова голова
      const newHead = {x: snakeX, y: snakeY};

      // кінець гри
      if(snakeX<0 || snakeY<0 || snakeX>=400 || snakeY>=400 ||
         snake.some((part,i)=> i!==0 && part.x===snakeX && part.y===snakeY)){
        clearInterval(game);
        alert("Гра закінчена! Рахунок: " + snake.length);
      }

      snake.unshift(newHead);
    }

    const game = setInterval(draw, 150);
  </script>
</body>
</html>
